// æ–‡ä»¶å›¾æ ‡æ˜ å°„ - ä¼˜åŒ–æ€§èƒ½çš„é™æ€æ˜ å°„
export const FILE_ICONS = {
  // æ–‡æ¡£
  txt: 'ğŸ“„',
  md: 'ğŸ“',
  pdf: 'ğŸ“•',
  doc: 'ğŸ“˜',
  docx: 'ğŸ“˜',
  xls: 'ğŸ“—',
  xlsx: 'ğŸ“—',
  ppt: 'ğŸ“™',
  pptx: 'ğŸ“™',
  odt: 'ğŸ“˜',
  ods: 'ğŸ“—',
  odp: 'ğŸ“™',

  // ä»£ç 
  js: 'ğŸ“œ',
  jsx: 'âš›ï¸',
  ts: 'ğŸ“˜',
  tsx: 'âš›ï¸',
  html: 'ğŸŒ',
  htm: 'ğŸŒ',
  css: 'ğŸ¨',
  scss: 'ğŸ¨',
  sass: 'ğŸ¨',
  less: 'ğŸ¨',
  json: 'ğŸ“‹',
  xml: 'ğŸ“„',
  yaml: 'ğŸ“„',
  yml: 'ğŸ“„',
  py: 'ğŸ',
  java: 'â˜•',
  cpp: 'âš™ï¸',
  c: 'âš™ï¸',
  cs: 'âš™ï¸',
  go: 'ğŸ¹',
  rs: 'ğŸ¦€',
  php: 'ğŸ˜',
  rb: 'ğŸ’',
  swift: 'ğŸ',
  kt: 'ğŸ¯',
  dart: 'ğŸ¯',
  lua: 'ğŸŒ™',
  r: 'ğŸ“Š',
  sql: 'ğŸ—ƒï¸',
  sh: 'ğŸ“œ',
  bash: 'ğŸ“œ',
  zsh: 'ğŸ“œ',
  fish: 'ğŸ ',
  ps1: 'ğŸ“œ',
  bat: 'ğŸ“œ',
  cmd: 'ğŸ“œ',

  // é…ç½®æ–‡ä»¶
  config: 'âš™ï¸',
  conf: 'âš™ï¸',
  ini: 'âš™ï¸',
  toml: 'âš™ï¸',
  env: 'ğŸ”',
  lock: 'ğŸ”’',
  gitignore: 'ğŸ“',
  dockerfile: 'ğŸ³',
  makefile: 'ğŸ”§',
  cmake: 'ğŸ”§',
  gradle: 'ğŸ˜',
  maven: 'ğŸ˜',
  package: 'ğŸ“¦',
  yarn: 'ğŸ“¦',
  npmrc: 'ğŸ“¦',

  // å›¾ç‰‡
  jpg: 'ğŸ–¼ï¸',
  jpeg: 'ğŸ–¼ï¸',
  png: 'ğŸ–¼ï¸',
  gif: 'ğŸ–¼ï¸',
  svg: 'ğŸ¨',
  ico: 'ğŸ–¼ï¸',
  bmp: 'ğŸ–¼ï¸',
  tiff: 'ğŸ–¼ï¸',
  webp: 'ğŸ–¼ï¸',
  psd: 'ğŸ¨',
  ai: 'ğŸ¨',
  eps: 'ğŸ¨',
  sketch: 'ğŸ¨',

  // éŸ³é¢‘
  mp3: 'ğŸµ',
  wav: 'ğŸµ',
  flac: 'ğŸµ',
  aac: 'ğŸµ',
  ogg: 'ğŸµ',
  wma: 'ğŸµ',
  m4a: 'ğŸµ',
  opus: 'ğŸµ',

  // è§†é¢‘
  mp4: 'ğŸ¬',
  avi: 'ğŸ¬',
  mkv: 'ğŸ¬',
  mov: 'ğŸ¬',
  wmv: 'ğŸ¬',
  flv: 'ğŸ¬',
  webm: 'ğŸ¬',
  m4v: 'ğŸ¬',
  '3gp': 'ğŸ¬',
  mpg: 'ğŸ¬',
  mpeg: 'ğŸ¬',

  // å‹ç¼©åŒ…
  zip: 'ğŸ“¦',
  rar: 'ğŸ“¦',
  '7z': 'ğŸ“¦',
  tar: 'ğŸ“¦',
  gz: 'ğŸ“¦',
  bz2: 'ğŸ“¦',
  xz: 'ğŸ“¦',
  z: 'ğŸ“¦',
  arj: 'ğŸ“¦',
  cab: 'ğŸ“¦',
  lzh: 'ğŸ“¦',
  ace: 'ğŸ“¦',
  uue: 'ğŸ“¦',
  jar: 'ğŸ“¦',
  war: 'ğŸ“¦',
  ear: 'ğŸ“¦',

  // å¯æ‰§è¡Œæ–‡ä»¶
  exe: 'âš™ï¸',
  msi: 'âš™ï¸',
  dmg: 'ğŸ’¿',
  pkg: 'ğŸ“¦',
  deb: 'ğŸ“¦',
  rpm: 'ğŸ“¦',
  apk: 'ğŸ“±',
  ipa: 'ğŸ“±',
  app: 'ğŸ“±',
  snap: 'ğŸ“¦',
  flatpak: 'ğŸ“¦',

  // ç³»ç»Ÿæ–‡ä»¶
  dll: 'âš™ï¸',
  so: 'âš™ï¸',
  dylib: 'âš™ï¸',
  sys: 'âš™ï¸',
  driver: 'ğŸ”§',
  bin: 'âš™ï¸',
  run: 'âš™ï¸',

  // æ•°æ®åº“æ–‡ä»¶
  db: 'ğŸ—ƒï¸',
  sqlite: 'ğŸ—ƒï¸',
  mdb: 'ğŸ—ƒï¸',
  accdb: 'ğŸ—ƒï¸',

  // å­—ä½“æ–‡ä»¶
  ttf: 'ğŸ”¤',
  otf: 'ğŸ”¤',
  woff: 'ğŸ”¤',
  woff2: 'ğŸ”¤',
  eot: 'ğŸ”¤',

  // è¯ä¹¦å’Œå¯†é’¥
  crt: 'ğŸ”',
  cer: 'ğŸ”',
  key: 'ğŸ”‘',
  pem: 'ğŸ”',
  p12: 'ğŸ”',
  pfx: 'ğŸ”',

  // å…¶ä»–å¸¸è§æ–‡ä»¶
  log: 'ğŸ“‹',
  tmp: 'ğŸ“„',
  bak: 'ğŸ“„',
  old: 'ğŸ“„',
  backup: 'ğŸ’¾',
  torrent: 'ğŸ”½',
  iso: 'ğŸ’¿',
  img: 'ğŸ’¿',
  vmdk: 'ğŸ’¿',
  vdi: 'ğŸ’¿'
};

// è·å–æ–‡ä»¶å›¾æ ‡çš„ä¼˜åŒ–å‡½æ•°
export function getFileIcon(filename) {
  if (!filename) return 'ğŸ“„';

  const parts = filename.split('.');
  if (parts.length < 2) return 'ğŸ“„';

  const extension = parts[parts.length - 1].toLowerCase();
  return FILE_ICONS[extension] || 'ğŸ“„';
}

// åˆ¤æ–­æ˜¯å¦ä¸ºç›®å½•
export function isDirectory(file) {
  return file.type === 'd' || file.type?.includes('dir');
}

// æ ¼å¼åŒ–æ–‡ä»¶å¤§å°
export function formatFileSize(bytes) {
  if (!bytes || bytes === 0) return '0 B';

  const k = 1024;
  const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];
  const i = Math.floor(Math.log(bytes) / Math.log(k));

  return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
}

// æ ¼å¼åŒ–æ–‡ä»¶æƒé™
export function formatFilePermissions(permissions) {
  if (!permissions) return 'rw-r--r--';

  // ç®€åŒ–æƒé™æ˜¾ç¤º
  if (permissions.length === 9) {
    return permissions.replace(/(.{3})(.{3})(.{3})/, '$1 $2 $3');
  }

  return permissions;
}

// æ ¼å¼åŒ–æ—¥æœŸ
export function formatDate(timestamp) {
  if (!timestamp) return '-';

  const date = new Date(timestamp);
  return date.toLocaleDateString('zh-CN', {
    year: 'numeric',
    month: '2-digit',
    day: '2-digit',
    hour: '2-digit',
    minute: '2-digit'
  });
}