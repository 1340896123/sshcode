# AI 智能终端补全功能

## 功能概述

这个功能使用AI来提供智能的终端命令补全，相比传统的基于文件系统的补全，AI补全能够：

1. **理解上下文** - 根据当前目录、用户历史命令等信息提供更准确的建议
2. **智能意图识别** - 理解用户想要做什么，而不仅仅是匹配文本
3. **参数建议** - 为命令提供合适的参数建议
4. **学习用户习惯** - 基于历史命令学习用户的使用习惯

## 使用方法

### 基本使用
1. 在终端中输入部分命令或参数
2. 按 `Tab` 键触发AI补全
3. 等待AI分析（会显示"🤖 AI正在思考..."）
4. 从建议列表中选择合适的补全项

### 补全类型
- **命令补全** - 输入命令开头时建议相关命令
- **路径补全** - 智能建议文件和目录路径
- **参数补全** - 为已知命令建议合适的参数
- **上下文补全** - 基于当前工作目录和历史命令的建议

### 界面说明
- 🤖 **AI智能补全** - 标识这是AI提供的建议
- ⚡ **命令** - Linux命令建议
- 📁 **目录** - 目录路径建议
- 📄 **文件** - 文件路径建议
- (90%) - 置信度，表示AI对这个建议的把握程度

## 配置要求

### 必需配置
1. 在设置中配置AI模型信息：
   - API提供商（OpenAI、Anthropic等）
   - Base URL
   - API Key
   - 模型名称

### 推荐配置
- Temperature: 0.3（较低的温度确保更准确的补全）
- Max Tokens: 1000（足够的token生成详细建议）

## 降级机制

如果AI不可用或配置错误，系统会自动降级到传统补全：
- 基于内置命令列表的命令补全
- 基于文件系统的路径补全
- 不会影响基本的Tab补全功能

## 示例场景

### 场景1：命令补全
```
输入: ls
按Tab -> AI建议: ls, lsblk, lsof, lspci, lsusb
```

### 场景2：智能参数建议
```
输入: git 
按Tab -> AI建议: git status, git add, git commit, git push, git pull
```

### 场景3：上下文感知补全
```
当前目录: /home/user/projects
输入: cd 
按Tab -> AI建议: cd ../, cd ./src/, cd ./docs/, cd /var/log/
```

## 性能优化

1. **缓存机制** - 相同的补全请求会被缓存
2. **智能降级** - AI失败时自动使用传统补全
3. **异步处理** - 不会阻塞终端输入
4. **超时控制** - 避免长时间等待AI响应

## 故障排除

### AI补全不工作
1. 检查AI配置是否正确
2. 确认网络连接正常
3. 验证API Key是否有效
4. 查看浏览器控制台错误信息

### 补全速度慢
1. 检查网络延迟
2. 考虑使用更快的AI模型
3. 调整Temperature设置
4. 系统会自动降级到传统补全

### 建议不准确
1. AI正在学习阶段，会随使用时间改善
2. 可以手动输入正确命令，AI会从历史中学习
3. 调整AI的Temperature参数

## 技术实现

### AI提示词设计
系统会构建包含以下信息的提示词：
- 当前用户和目录
- 最近的命令历史
- 用户当前输入
- 明确的补全要求

### 响应解析
AI返回JSON格式的补全建议：
```json
{
  "completions": [
    {
      "text": "建议的补全文本",
      "type": "command|directory|file|argument",
      "description": "简短描述",
      "confidence": 0.9
    }
  ]
}
```

### 错误处理
- 网络错误自动重试
- API错误降级到传统补全
- 解析错误使用默认补全
- 超时保护避免长时间等待